{% extends "layout.html" %}

{% block title %}Manage Projects | Admin{% endblock %}

{% block content %}
<section class="admin-section">
    <h2>ğŸ“ Manage Projects</h2>
    <div class="admin-actions">
        <a href="{{ url_for('admin_views.create_project') }}" class="btn">â• Create New Project</a>
        <a href="{{ url_for('admin_views.admin') }}" class="btn btn-secondary">â† Back to Dashboard</a>
    </div>

    {% for project in projects %}
    <div class="project-card admin-project-card">
        <div class="project-header">
            <h3>{{ project.title }}</h3>
            <span class="status-{{ project.status.lower().replace(' ', '-') }}">{{ project.status }}</span>
        </div>
        <p>{{ project.description }}</p>
        
        <div class="project-stats">
            <span>ğŸ“ {{ project.posts|length }} posts</span>
            <span>ğŸ› ï¸ {{ project.skills|length }} skills</span>
            <span>ğŸ“¸ {{ project.images|length }} images</span>
        </div>
        
        <div class="admin-actions">
            <a href="{{ url_for('admin_views.admin_open_project_posts', project_title=project.title) }}" class="btn btn-small">View Posts</a>
            <a href="{{ url_for('admin_views.edit_project', project_id=project.id) }}" class="btn btn-small">Edit</a>
            <a href="{{ url_for('admin_views.manage_project_skills', project_id=project.id) }}" class="btn btn-small">Skills</a>
            <a href="{{ url_for('admin_views.manage_project_images', project_id=project.id) }}" class="btn btn-small">Images</a>
            <form method="POST" action="{{ url_for('admin_views.delete_project', project_id=project.id) }}" style="display:inline;" onsubmit="return confirm('âš ï¸ Delete this project?\n\nThis will also delete all associated posts and images. This action cannot be undone.');">
                <button type="submit" class="btn btn-small btn-danger">Delete</button>
            </form>
        </div>
    </div>
    {% endfor %}
</section>
{% endblock %}

{% extends "admin/layout.html" %}

{% block title %}Manage Experience{% endblock %}

{% block content %}
<div class="admin-header">
    <h1>Manage Experience</h1>
</div>

<div class="admin-card">
    <h2>Add Experience</h2>
    <form action="{{ url_for('admin.add_experience') }}" method="POST">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        
        <div class="admin-form-group">
            <label for="exp_type">Type</label>
            <select id="exp_type" name="exp_type" required>
                <option value="experience">Work Experience</option>
                <option value="education">Education</option>
            </select>
        </div>
        
        <div class="admin-form-group">
            <label for="title">Title/Position</label>
            <input type="text" id="title" name="title" required placeholder="e.g. Software Developer or Bachelor of Computer Science">
        </div>
        
        <div class="admin-form-group">
            <label for="organization">Company/Institution</label>
            <input type="text" id="organization" name="organization" required placeholder="e.g. Google Inc. or University of Example">
        </div>
        
        <div class="form-row">
            <div class="admin-form-group">
                <label for="start_date">Start Date</label>
                <input type="text" id="start_date" name="start_date" required placeholder="e.g. Jan 2020 or 2018">
            </div>
            
            <div class="admin-form-group">
                <label for="end_date">End Date</label>
                <input type="text" id="end_date" name="end_date" placeholder="e.g. Present or Dec 2022">
            </div>
        </div>
        
        <div class="admin-form-group">
            <label for="description">Description</label>
            <textarea id="description" name="description" rows="4" placeholder="Describe your responsibilities, achievements, or courses"></textarea>
        </div>
        
        <button type="submit" class="admin-btn">Add Experience</button>
    </form>
</div>

<div class="admin-card">
    <h2>Work Experience</h2>
    {% if experience.experience %}
        <table class="admin-table">
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Organization</th>
                    <th>Period</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for exp in experience.experience %}
                    <tr>
                        <td>{{ exp.title }}</td>
                        <td>{{ exp.organization }}</td>
                        <td>{{ exp.start_date }} - {{ exp.end_date }}</td>
                        <td class="admin-actions">
                            <a href="{{ url_for('admin.edit_experience', exp_type='experience', exp_id=exp.id) }}" class="admin-btn edit">Edit</a>
                            <form action="{{ url_for('admin.delete_experience', exp_type='experience', exp_id=exp.id) }}" method="POST" class="delete-form" onsubmit="return confirm('Are you sure you want to delete this experience?');">
                                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                                <button type="submit" class="admin-btn delete">Delete</button>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p class="no-items">No work experience added yet.</p>
    {% endif %}
</div>

<div class="admin-card">
    <h2>Education</h2>
    {% if experience.education %}
        <table class="admin-table">
            <thead>
                <tr>
                    <th>Degree/Course</th>
                    <th>Institution</th>
                    <th>Period</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for edu in experience.education %}
                    <tr>
                        <td>{{ edu.title }}</td>
                        <td>{{ edu.organization }}</td>
                        <td>{{ edu.start_date }} - {{ edu.end_date }}</td>
                        <td class="admin-actions">
                            <a href="{{ url_for('admin.edit_experience', exp_type='education', exp_id=edu.id) }}" class="admin-btn edit">Edit</a>
                            <form action="{{ url_for('admin.delete_experience', exp_type='education', exp_id=edu.id) }}" method="POST" class="delete-form" onsubmit="return confirm('Are you sure you want to delete this education entry?');">
                                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                                <button type="submit" class="admin-btn delete">Delete</button>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p class="no-items">No education history added yet.</p>
    {% endif %}
</div>
{% endblock %}

{% block additional_head %}
<style>
    .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
    }
    
    @media (max-width: 768px) {
        .form-row {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %}
